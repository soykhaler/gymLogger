<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gym Logger</title>
  <style>
    :root {
      --bg: #0d1117;
      --card: #161b22;
      --text: #e6edf3;
      --muted: #8b949e;
      --accent: #58a6ff;
      --radius: 14px;
      --shadow: 0 4px 20px rgba(0,0,0,0.3);
      font-family: Inter, system-ui, sans-serif;
    }
    body {
      background: var(--bg);
      color: var(--text);
      margin: 0;
      display: flex;
      justify-content: center;
      padding: 20px;
    }
    .app {
      width: 100%;
      max-width: 600px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .card {
      background: var(--card);
      padding: 20px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      display: flex;
      flex-direction: column;
      gap: 14px;
    }
    h1 {
      margin: 0;
      font-size: 22px;
      font-weight: 600;
    }
    label {
      font-size: 14px;
      color: var(--muted);
      margin-bottom: 4px;
    }
    input {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid #30363d;
      background: #0f141a;
      color: var(--text);
      font-size: 15px;
    }
    button {
      padding: 12px;
      border-radius: 10px;
      font-size: 15px;
      cursor: pointer;
      border: none;
    }
    .btn-main {
      background: var(--accent);
      color: #041521;
      font-weight: 600;
    }
    .toolbar {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .btn-secondary {
      background: #21262d;
      color: var(--muted);
      border: 1px solid #30363d;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }
    th {
      text-align: left;
      color: var(--muted);
      font-size: 12px;
      padding-bottom: 6px;
    }
    td {
      padding: 8px 2px;
      border-top: 1px solid #2d333b;
    }
    .actions button {
      padding: 6px 8px;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <div class="app">
    <h1>Gym Logger</h1>

    <div class="card">
      <label>Fecha</label>
      <input type="date" id="date">

      <label>Ejercicio</label>
      <input id="exercise" placeholder="Press banca, Jalón, Curl EZ...">

      <label>Series</label>
      <input id="sets" type="number" value="3">

      <label>Reps</label>
      <input id="reps" type="number" value="10">

      <label>Peso (kg)</label>
      <input id="weight" type="number" step="0.5">

      <label>Notas</label>
      <input id="notes" placeholder="opcional">

      <div class="toolbar">
        <button class="btn-main" id="add">Añadir registro</button>
        <button class="btn-secondary" id="exportJson">Exportar JSON</button>
        <button class="btn-secondary" id="importJson">Importar JSON</button>
        <button class="btn-secondary" id="clearAll">Borrar todo</button>
        <input type="file" id="importFile" accept="application/json" style="display:none;" />
      </div>
    </div>

    <div class="card">
      <table>
        <thead>
          <tr>
            <th>Fecha</th>
            <th>Ejercicio</th>
            <th>Kg</th>
            <th>Sets</th>
            <th>Reps</th>
            <th></th>
          </tr>
        </thead>
        <tbody id="log"></tbody>
      </table>
    </div>
  </div>

<script>
const KEY = "gym_log_v1";
const logEl = document.getElementById("log");

const load = () => JSON.parse(localStorage.getItem(KEY) || "[]");
const save = data => localStorage.setItem(KEY, JSON.stringify(data));

function render() {
  const data = load();
  logEl.innerHTML = "";

  data.slice().reverse().forEach(item => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${item.date}</td>
      <td>${item.exercise}</td>
      <td>${item.weight}</td>
      <td>${item.sets}</td>
      <td>${item.reps}</td>
      <td><button class="btn-secondary" onclick="delItem('${item.id}')">X</button></td>
    `;
    logEl.appendChild(tr);
  });
}

function delItem(id) {
  const data = load().filter(x => x.id !== id);
  save(data);
  render();
}

document.getElementById("add").onclick = () => {
  const item = {
    id: Date.now().toString(),
    date: document.getElementById("date").value,
    exercise: document.getElementById("exercise").value,
    sets: document.getElementById("sets").value,
    reps: document.getElementById("reps").value,
    weight: document.getElementById("weight").value,
    notes: document.getElementById("notes").value,
  };

  const data = load();
  data.push(item);
  save(data);
  render();
};

document.getElementById("exportJson").onclick = () => {
  const blob = new Blob([JSON.stringify(load(), null, 2)], {type:"application/json"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "gym_log.json";
  a.click();
  URL.revokeObjectURL(url);
};

document.getElementById("importJson").onclick = () => document.getElementById("importFile").click();

document.getElementById("importFile").onchange = e => {
  const file = e.target.files[0];
  const reader = new FileReader();
  reader.onload = () => {
    try {
      const json = JSON.parse(reader.result);
      if (Array.isArray(json)) save(json);
      render();
    } catch {
      alert("Archivo JSON inválido.");
    }
  };
  reader.readAsText(file);
};

document.getElementById("clearAll").onclick = () => {
  if (confirm("¿Borrar todo?")) {
    localStorage.removeItem(KEY);
    render();
  }
};

document.getElementById("date").value = new Date().toISOString().slice(0,10);
render();
</script>
</body>
</html>
